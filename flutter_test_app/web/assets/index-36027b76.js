import{d as z,a as D,o as c,c as u,f as e,w as o,$ as N,ac as L,g as a,e as g,i as r,Y as S,m as j,C as P,ax as R,j as U,k as H}from"./index-0207282d.js";import{v as I}from"./el-loading-080c5bc8.js";import{u as K,_ as M,a as Q}from"./useTable-c580cec4.js";import{E as Y,a as q}from"./el-table-column-def74e1d.js";import"./el-checkbox-816fe3b3.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-90f9afbe.js";import{_ as A}from"./Timekeeping.vue_vue_type_script_setup_true_lang-7ee7f36f.js";import"./el-tag-0efdc75d.js";import{E as G}from"./el-image-viewer-2e0deb40.js";/* empty css                  */import{E as J,a as O}from"./el-tab-pane-02f4865e.js";import{_ as W}from"./AddEditModal.vue_vue_type_script_setup_true_lang-e3211d3e.js";import{u as X}from"./useConfirm-47e716c6.js";import{E as Z}from"./message-4c47188d.js";import"./el-form-item-cffcfafd.js";import"./castArray-b8a06b61.js";import"./_Uint8Array-5054225c.js";import"./_initCloneObject-d522ba90.js";/* empty css                 */import"./el-select-69ed96fa.js";import"./strings-185a2c5e.js";import"./isEqual-7382b5a8.js";import"./index-83327429.js";import"./hasIn-41f90f84.js";import"./flatten-24f36df1.js";import"./raf-fd37df43.js";import"./useDate-185e3b3e.js";import"./UploadAvatar.vue_vue_type_script_setup_true_lang-6923552b.js";import"./useRule-31f8c705.js";const ee={class:"p-4"},te={class:"flex justify-end flex-1"},oe=g("div",{class:"text-xs text-gray-400"},"预览失败",-1),Le=z({__name:"index",setup(ae){const s=D({type:1}),h=[{code:1,desc:"账户模块-账户概览页面"},{code:2,desc:"策略模块-策略广场页面"}],{pending:d,tableData:b,pagination:w,search:_,refresh:m,reset:y}=K({method:"get",url:n=>`/banner/list/${n.type}`,form:s}),f=n=>{R.add({component:W,type:"dialog",width:"500px",title:n!=null&&n.id?"编辑":"新增",showClose:!1,props:{row:n??{},type:s.type},afterClose(l){l&&m()}})},v=n=>{X("确定删除该数据吗？",async l=>{try{await U.postForm("/banner/delete/"+n.id),Z.success("操作成功"),m()}finally{l()}})};return(n,l)=>{const C=J,x=O,p=H,k=G,i=Y,E=A,T=q,F=M,$=Q,B=I;return c(),u("div",ee,[e(x,{modelValue:a(s).type,"onUpdate:modelValue":l[0]||(l[0]=t=>a(s).type=t),class:"demo-tabs",onTabChange:a(_)},{default:o(()=>[(c(),u(N,null,L(h,t=>e(C,{key:t.code,label:t.desc,name:t.code},null,8,["label","name"])),64))]),_:1},8,["modelValue","onTabChange"]),e($,{onSearchFun:a(_),onResetFun:a(y),pending:a(d)},{action:o(()=>[g("div",te,[e(p,{type:"primary",size:"small",onClick:f},{default:o(()=>[r("新增")]),_:1})])]),result:o(()=>[S((c(),j(T,{data:a(b),stripe:"",class:"w-full"},{default:o(()=>[e(i,{label:"图片",align:"center","min-width":"100"},{default:o(t=>[e(k,{src:t.row.url,lazy:"",class:"w-[100px] h-10 flex-center",fit:"cover"},{error:o(()=>[oe]),_:2},1032,["src"])]),_:1}),e(i,{prop:"name",label:"图片名称",align:"center","min-width":"120","show-overflow-tooltip":""}),e(i,{label:"图片大小",align:"center","min-width":"120","show-overflow-tooltip":""},{default:o(t=>[r(P(t.row.size)+"KB",1)]),_:1}),e(i,{prop:"linkUrl",label:"活动链接",align:"center","min-width":"120","show-overflow-tooltip":""}),e(i,{prop:"createTimestamp",label:"上传时间",align:"center","min-width":"120","show-overflow-tooltip":""},{default:o(t=>[e(E,{"begin-time":t.row.createTimestamp},null,8,["begin-time"])]),_:1}),e(i,{prop:"userName",label:"上传用户",align:"center","min-width":"120","show-overflow-tooltip":""}),e(i,{label:"操作",fixed:"right",align:"center",width:"140"},{default:o(t=>[e(p,{type:"primary",size:"small",plain:"",onClick:V=>f(t.row)},{default:o(()=>[r(" 编辑 ")]),_:2},1032,["onClick"]),e(p,{type:"danger",size:"small",plain:"",onClick:V=>v(t.row)},{default:o(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[B,a(d)]]),e(F,{pagination:a(w),class:"mt-4",onChange:a(m)},null,8,["pagination","onChange"])]),_:1},8,["onSearchFun","onResetFun","pending"])])}}});export{Le as default};
