import{E as A}from"./el-progress.OMt4erQV.js";import{u as I,G as U,q as y,cv as z,b as c}from"./entry.iYjkhHK1.js";import{d as B,A as C,c as n,F as R,X as S,Y as k,N as w,O as E,u as l}from"./swiper-vue.o0IHd9hR.js";import"./typescript.WBLZcIum.js";import"./_baseClone._afwB-RI.js";import"./_initCloneObject.cX7xIYQh.js";const G=B({__name:"UploadFileList",props:{accept:{},action:{},multiple:{type:Boolean},limit:{}},emits:["update:loading"],setup(u,{emit:d}){const r=d,m=I().app,t=u,f=U().public.baseURL+(C(t).action||"/admin/file/upload"),a=n(()=>t.accept??""),i=n(()=>t.limit??2),g=n(()=>({Authorization:m.authorization})),{t:p}=y(),h=(e,s,o)=>{const{data:b}=e;s.response=b,r("update:loading",o.findIndex(v=>v.status==="uploading")>=0)},_=e=>{if(z(e.type||e.name.split(".").slice(-1)[0],a.value)){if(e.size/1024/1024>i.value)return c.error(p("rule.t013",[i.value])),!1}else return c.error(p("rule.t012",[a.value])),!1;return r("update:loading",!0),!0};return(e,s)=>{const o=A;return R(),S(o,E(e.$attrs,{action:f,"before-upload":_,"on-success":h,accept:l(a),headers:l(g),multiple:e.multiple,drag:""}),{default:k(()=>[w(e.$slots,"default")]),_:3},16,["accept","headers","multiple"])}}});export{G as default};
