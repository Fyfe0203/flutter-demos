import{d as L,r as c,a2 as M,N as T,t as j,j as E,o as u,c as k,f as o,w as s,g as t,$ as N,ac as C,m as R,e as d,C as S,i as B,E as I,k as O}from"./index-0207282d.js";/* empty css                  */import{E as $,a as H}from"./el-form-item-cffcfafd.js";/* empty css                 */import"./el-tag-0efdc75d.js";import{E as q,a as z}from"./el-select-69ed96fa.js";import"./el-popper-90f9afbe.js";import{u as G}from"./enum-569bea9e.js";import{u as m}from"./useRule-31f8c705.js";const J=d("div",{class:"text-lg mb-2"},"1. 基础配置",-1),K=d("div",{class:"text-lg mb-2"},"2. 奖励配置",-1),P={class:"flex-1"},Q={class:"text-xs text-gray-400"},W={class:"flex-center mt-6"},ne=L({__name:"AddEditModal",props:{row:{type:Object,default:()=>({})}},emits:["close"],setup(F,{emit:y}){const b=F,U=G(),n={empty:m.empty(),gteint:[m.empty(),m.gteint()],gte:[m.empty(),m.gte()]},x=c(),l=c({});M(()=>{l.value={...b.row}});const h=T(()=>U.coinList),p=c(!1),A=async()=>{x.value.validate(async i=>{if(i)try{p.value=!0,await E.post("/task/"+(b.row.taskNo?"edit":"save"),{...l.value}),y("close",!0)}finally{p.value=!1}})},V=c([]);return j(()=>{E.postForm("/task/type").then(i=>{V.value=i})}),(i,a)=>{const g=q,v=z,r=$,f=I,D=H,w=O;return u(),k("div",null,[o(D,{ref_key:"formRef",ref:x,model:t(l),"label-width":"140px","label-position":"top"},{default:s(()=>[J,o(r,{label:"任务代码",prop:"taskSymbol",rules:n.empty},{default:s(()=>[o(v,{modelValue:t(l).taskSymbol,"onUpdate:modelValue":a[0]||(a[0]=e=>t(l).taskSymbol=e),placeholder:"选择任务代码",class:"w-full"},{default:s(()=>[(u(!0),k(N,null,C(t(V),(e,_)=>(u(),R(g,{key:_,label:e.desc,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"]),o(r,{label:"任务名称",prop:"taskName",rules:n.empty},{default:s(()=>[o(f,{modelValue:t(l).taskName,"onUpdate:modelValue":a[1]||(a[1]=e=>t(l).taskName=e),maxlength:20},null,8,["modelValue"])]),_:1},8,["rules"]),o(r,{label:"任务描述",prop:"taskDesc",rules:n.empty},{default:s(()=>[o(f,{modelValue:t(l).taskDesc,"onUpdate:modelValue":a[2]||(a[2]=e=>t(l).taskDesc=e),maxlength:100,type:"textarea",rows:3},null,8,["modelValue"])]),_:1},8,["rules"]),K,o(r,{label:"奖励币种",prop:"taskRewardCoin",rules:n.empty},{default:s(()=>[o(v,{modelValue:t(l).taskRewardCoin,"onUpdate:modelValue":a[3]||(a[3]=e=>t(l).taskRewardCoin=e),placeholder:"选择奖励币种",class:"w-full"},{default:s(()=>[(u(!0),k(N,null,C(t(h),(e,_)=>(u(),R(g,{key:_,label:e.coinName,value:e.coinCode,class:"!px-2 flex-center-x gap-2"},{default:s(()=>[d("span",P,S(e.coinName),1),d("span",Q,S(e.chainType),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"]),o(r,{label:"奖励数量",prop:"taskRewardAmount",rules:n.gteint},{default:s(()=>[o(f,{modelValue:t(l).taskRewardAmount,"onUpdate:modelValue":a[4]||(a[4]=e=>t(l).taskRewardAmount=e),modelModifiers:{number:!0},placeholder:"请设置用户单次可领取的体验金数量…"},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"]),d("div",W,[o(w,{type:"info",disabled:t(p),onClick:a[5]||(a[5]=e=>y("close"))},{default:s(()=>[B("关闭")]),_:1},8,["disabled"]),o(w,{type:"primary",loading:t(p),onClick:A},{default:s(()=>[B("保存")]),_:1},8,["loading"])])])}}});export{ne as _};
