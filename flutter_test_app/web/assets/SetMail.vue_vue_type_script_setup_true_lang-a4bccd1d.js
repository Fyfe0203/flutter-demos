import{d as x,r as m,a2 as B,o as E,m as F,w as s,f as l,g as a,e as I,i as c,C as _,j as b,b as N,E as R,k as S}from"./index-0207282d.js";import{E as U,a as j}from"./el-form-item-cffcfafd.js";/* empty css                  */import{_ as M}from"./BtnCode.vue_vue_type_style_index_0_lang-36bef829.js";/* empty css                 */import{u as y}from"./useRule-31f8c705.js";import{E as D}from"./message-4c47188d.js";const H={class:"flex-center-x gap-5 w-full"},K=x({__name:"SetMail",props:{info:{type:Object,default:()=>{}}},emits:["close"],setup(v,{emit:r}){const V=v,g={code:y.empty(),email:y.email()},p=m(),t=m({email:"",code:""});m(1),B(()=>{t.value.email=V.info.email});const C=()=>b.post("/send/email/code",{type:0,email:t.value.email}),i=m(!1),$=o=>{o==null||o.validate(async e=>{if(e){i.value=!0;try{await b.putForm("/info/set/email",{code:t.value.code,email:t.value.email}),D.success("设置成功"),N().getUserInfo(),r("close",!0)}finally{i.value=!1}}})};return(o,e)=>{const d=R,u=U,k=M,f=S,w=j;return E(),F(w,{ref_key:"formRef",ref:p,model:a(t),rules:g,"label-position":"top"},{default:s(()=>[l(u,{label:o.$t("public.mail"),prop:"email"},{default:s(()=>[l(d,{modelValue:a(t).email,"onUpdate:modelValue":e[0]||(e[0]=n=>a(t).email=n),type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),l(u,{label:o.$t("public.verify_code"),prop:"code"},{default:s(()=>[I("div",H,[l(d,{modelValue:a(t).code,"onUpdate:modelValue":e[1]||(e[1]=n=>a(t).code=n),type:"text",class:"flex-1"},null,8,["modelValue"]),l(k,{fun:C})])]),_:1},8,["label"]),l(u,null,{default:s(()=>[l(f,{type:"default",disabled:a(i),onClick:e[2]||(e[2]=n=>r("close"))},{default:s(()=>[c(_(o.$t("public.t3")),1)]),_:1},8,["disabled"]),l(f,{type:"primary",loading:a(i),onClick:e[3]||(e[3]=n=>$(a(p)))},{default:s(()=>[c(_(o.$t("public.t2")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])}}});export{K as _};
