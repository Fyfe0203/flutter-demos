import C from"./Button.0ywGpm4G.js";import{n as w,a as m,u as U,b as D}from"./entry.iYjkhHK1.js";import{u as G}from"./useDialogDemo.maJlTrXP.js";import{u as v}from"./useSignTypedData.Q-jcBIBi.js";import{u as S}from"./useSwitchChain.oHENUefy.js";import{d as L,a as A,F as b,G as O,H as k,a2 as h,W as B,Y as M,a6 as N,u as I,aB as E}from"./swiper-vue.o0IHd9hR.js";import"./el-button.EgmKH-rJ.js";import"./el-input.2YP29THG.js";import"./typescript.WBLZcIum.js";import"./validator.SQwMGO7Q.js";import"./useMutation.MFSmmj-f.js";import"./getConnectorClient.pAPlZtnz.js";function T(t,n=365){const e=Math.floor(+new Date/1e3),s={...t,validUntil:e+n*24*60*60,validAfter:e};return{domain:{name:"BitMeow Account",chainId:t.chainId,version:"1",verifyingContract:t.bitMeowAccount},types:{License:[{name:"chainId",type:"uint256"},{name:"tokenContract",type:"address"},{name:"tokenId",type:"uint256"},{name:"bitMeowAccount",type:"address"},{name:"permitNonce",type:"uint256"},{name:"manager",type:"address"},{name:"validUntil",type:"uint48"},{name:"validAfter",type:"uint48"}]},message:s}}const Z={class:"p-8 text-main2"},V=E('<div class="flex-center pt-5"><svg xmlns="http://www.w3.org/2000/svg" width="106" height="106" viewBox="0 0 106 106" fill="none"><circle cx="53" cy="53" r="53" fill="url(#paint0_linear_2853_366)"></circle><mask id="mask0_2853_366" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="106" height="106"><circle cx="53" cy="53" r="53" fill="url(#paint1_linear_2853_366)"></circle></mask><g mask="url(#mask0_2853_366)"><path d="M17.9276 17.0948L67.9276 7.09478C77.5275 3.89478 82.261 9.42811 83.4277 12.5948L97.9277 83.0948C99.5277 90.6948 95.2611 94.5948 92.9277 95.5948C79.5944 98.2614 50.2277 104.195 39.4277 106.595C28.6277 108.995 25.9277 102.928 25.9277 99.5948C21.9277 79.4281 13.4276 36.9948 11.4276 28.5948C9.42758 20.1948 14.9276 17.4281 17.9276 17.0948Z" fill="url(#paint2_linear_2853_366)"></path><path d="M21.8293 24.0948L34.8293 21.5948L56.8291 17.5948L68.3291 14.5948C73.5291 12.9948 75.4958 15.9281 75.8291 17.5948L90.3291 88.0948C77.9958 90.4281 51.4291 95.5948 43.8291 97.5948C36.2291 99.5948 32.9958 94.7615 32.3291 92.0948C28.4958 73.4281 20.5293 34.9948 19.3293 30.5948C18.1293 26.1948 20.496 24.4281 21.8293 24.0948Z" fill="url(#paint3_linear_2853_366)"></path><circle cx="53.8281" cy="45.0947" r="17.5" fill="#D9D9D9"></circle><circle cx="53.8281" cy="45.0947" r="17.5" fill="url(#paint4_linear_2853_366)"></circle><rect x="35.3281" y="70.7993" width="44.0718" height="3.41183" rx="1.70591" transform="rotate(-11.1137 35.3281 70.7993)" fill="url(#paint5_linear_2853_366)"></rect><rect x="42.3281" y="76.0898" width="32.7333" height="3.41183" rx="1.70591" transform="rotate(-11.1137 42.3281 76.0898)" fill="#D9D9D9"></rect><rect x="42.3281" y="76.0898" width="32.7333" height="3.41183" rx="1.70591" transform="rotate(-11.1137 42.3281 76.0898)" fill="url(#paint6_linear_2853_366)"></rect><circle cx="53.8281" cy="45.0947" r="11.5" fill="#D9D9D9"></circle><circle cx="53.8281" cy="45.0947" r="11.5" fill="url(#paint7_linear_2853_366)"></circle><path d="M46.8281 89.0947C47.2281 94.6947 43.3281 97.7614 41.3281 98.5947L93.3281 88.0947C98.1281 85.6947 98.9948 80.7614 98.8281 78.5947L46.8281 89.0947Z" fill="url(#paint8_linear_2853_366)"></path><path d="M32.513 12.1921L38 11.0947C36.8 5.49463 40.8333 2.76132 43 2.09467C49.4 1.29467 51.6667 5.76134 52 8.09467L57.7086 7.33352C58.726 7.19788 59.6809 7.85431 59.9186 8.85273L61.5228 15.5903C61.784 16.6875 61.0868 17.7836 59.9824 18.0121L34.9208 23.1973C33.854 23.418 32.8067 22.7443 32.5653 21.682L30.955 14.5965C30.7056 13.4995 31.4098 12.4127 32.513 12.1921Z" fill="#D9D9D9"></path><path d="M32.513 12.1921L38 11.0947C36.8 5.49463 40.8333 2.76132 43 2.09467C49.4 1.29467 51.6667 5.76134 52 8.09467L57.7086 7.33352C58.726 7.19788 59.6809 7.85431 59.9186 8.85273L61.5228 15.5903C61.784 16.6875 61.0868 17.7836 59.9824 18.0121L34.9208 23.1973C33.854 23.418 32.8067 22.7443 32.5653 21.682L30.955 14.5965C30.7056 13.4995 31.4098 12.4127 32.513 12.1921Z" fill="url(#paint9_linear_2853_366)"></path><circle cx="45" cy="8.59473" r="3" fill="white"></circle><rect x="39" y="16.2954" width="16" height="3" rx="1.5" transform="rotate(-9.71798 39 16.2954)" fill="white"></rect><rect x="50.584" y="49.1677" width="12.8029" height="2.82122" rx="1.41061" transform="rotate(-52.5767 50.584 49.1677)" fill="#5983F0"></rect><rect x="50.584" y="49.1677" width="12.8029" height="2.82122" rx="1.41061" transform="rotate(-52.5767 50.584 49.1677)" fill="url(#paint10_linear_2853_366)"></rect><rect x="52.6152" y="51.1306" width="6.95272" height="2.82122" rx="1.41061" transform="rotate(-143.871 52.6152 51.1306)" fill="#5983F0"></rect><rect x="52.6152" y="51.1306" width="6.95272" height="2.82122" rx="1.41061" transform="rotate(-143.871 52.6152 51.1306)" fill="url(#paint11_linear_2853_366)"></rect></g><defs><linearGradient id="paint0_linear_2853_366" x1="53" y1="0" x2="53" y2="106" gradientUnits="userSpaceOnUse"><stop stop-color="#328DF9"></stop><stop offset="1" stop-color="#2866F8"></stop></linearGradient><linearGradient id="paint1_linear_2853_366" x1="53" y1="0" x2="53" y2="106" gradientUnits="userSpaceOnUse"><stop stop-color="#328DF9"></stop><stop offset="1" stop-color="#2866F8"></stop></linearGradient><linearGradient id="paint2_linear_2853_366" x1="54.639" y1="6.13135" x2="54.639" y2="107.142" gradientUnits="userSpaceOnUse"><stop stop-color="#EEF5FF"></stop><stop offset="1" stop-color="#CBDEFF"></stop></linearGradient><linearGradient id="paint3_linear_2853_366" x1="54.6646" y1="14.1323" x2="54.6646" y2="98.0671" gradientUnits="userSpaceOnUse"><stop stop-color="white"></stop><stop offset="1" stop-color="#E9F1FF"></stop></linearGradient><linearGradient id="paint4_linear_2853_366" x1="36.3281" y1="45.0947" x2="71.3281" y2="45.0947" gradientUnits="userSpaceOnUse"><stop stop-color="#BFD8FF"></stop><stop offset="1" stop-color="#62A1FF"></stop></linearGradient><linearGradient id="paint5_linear_2853_366" x1="35.3281" y1="72.5052" x2="79.3999" y2="72.5052" gradientUnits="userSpaceOnUse"><stop stop-color="#BFD8FF"></stop><stop offset="1" stop-color="#62A1FF"></stop></linearGradient><linearGradient id="paint6_linear_2853_366" x1="42.3281" y1="77.7958" x2="75.0615" y2="77.7958" gradientUnits="userSpaceOnUse"><stop stop-color="#BFD8FF"></stop><stop offset="1" stop-color="#62A1FF"></stop></linearGradient><linearGradient id="paint7_linear_2853_366" x1="53.8281" y1="33.5947" x2="53.8281" y2="56.5947" gradientUnits="userSpaceOnUse"><stop stop-color="white"></stop><stop offset="1" stop-color="#C3D9FF"></stop></linearGradient><linearGradient id="paint8_linear_2853_366" x1="41.3281" y1="88.5947" x2="98.847" y2="88.5947" gradientUnits="userSpaceOnUse"><stop stop-color="#65A1FF"></stop><stop offset="1" stop-color="#3C8AFF"></stop></linearGradient><linearGradient id="paint9_linear_2853_366" x1="30.5" y1="12.7973" x2="62" y2="12.7973" gradientUnits="userSpaceOnUse"><stop stop-color="#BFD8FF"></stop><stop offset="1" stop-color="#62A1FF"></stop></linearGradient><linearGradient id="paint10_linear_2853_366" x1="50.584" y1="50.5783" x2="63.3869" y2="50.5783" gradientUnits="userSpaceOnUse"><stop stop-color="#62A1FF"></stop><stop offset="1" stop-color="#62A1FF"></stop></linearGradient><linearGradient id="paint11_linear_2853_366" x1="52.6152" y1="52.5412" x2="59.568" y2="52.5412" gradientUnits="userSpaceOnUse"><stop stop-color="#62A1FF"></stop><stop offset="1" stop-color="#62A1FF"></stop></linearGradient></defs></svg></div>',1),H={class:"text-base sm:text-xl font-semibold py-10 text-center"},tt=L({__name:"Start",props:{info:{default:()=>({})}},emits:["close"],setup(t,{emit:n}){const e=t,{signTypedDataAsync:s}=v(),{isConnected:d,chain:r}=w(),{switchChain:y}=S(),x=n,l=A(!1),g=async()=>{var i,p,o;l.value=!0;try{const{chainType:a,botNo:F}=e.info,{data:_}=await m.post("/bot/opt/permit/sign",{botNo:e.info.botNo}),c=T(_.value.data);let f;if((p=(i=_.value)==null?void 0:i.data)!=null&&p.signFlag){d.value||await G.loginWithoutSign();const u=U().app.chainId(a)??0;u!==((o=r==null?void 0:r.value)==null?void 0:o.id)&&await y({chainId:u}),f=await s({...c,primaryType:"License"})}await m.post("/bot/exec/start",{chainType:a,botNo:F,validAfter:c.message.validAfter,authPermitDeadline:c.message.validUntil,permitSign:f}),x("close",!0)}catch(a){l.value=!1,D.error(a.message??a)}};return(i,p)=>{const o=C;return b(),O("div",Z,[V,k("div",H,h(i.$t("bot.t904")),1),B(o,{class:"mt-10",loading:I(l),onClick:g},{default:M(()=>[N(h(i.$t("account.t48")),1)]),_:1},8,["loading"])])}}});export{tt as default};
