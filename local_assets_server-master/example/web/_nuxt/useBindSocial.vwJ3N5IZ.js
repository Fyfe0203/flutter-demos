import{i as n,a as o,o as m,b as h,c as p}from"./entry.nbMAVAIE.js";import{a as u}from"./swiper-vue.o0IHd9hR.js";function b(){const c=async()=>{if(!t.value.twitter){a.value.twitter=!0;try{const{data:e}=await o.get("/customer/bind/twitter/request/token",{callbackUrl:location.href}),l=e.value.data||"";if(!l)return h.error("Get X link failed");location.href=l}catch{}finally{a.value.twitter=!1}}},d=()=>{t.value.discord||(location.href="https://discord.com/oauth2/authorize?client_id=965841360580141106&redirect_uri="+encodeURIComponent(location.href)+"&response_type=code&scope=identify%20email&state=65de96aaccfb3ce8ada9282c")},f=()=>{t.value.telegram||(a.value.telegram=!0,p.add({title:" ",component:"AccountBindTM",width:"450px",afterClose(e){a.value.telegram=!1,e&&r()}}))},t=u({twitter:!1,discord:!1,telegram:!1}),a=u({twitter:!1,discord:!1,telegram:!1}),r=()=>{o.get("/customer/bind/info").then(({data:e})=>{t.value.twitter=e.value.data.includes(1),t.value.discord=e.value.data.includes(2),t.value.telegram=e.value.data.includes(3)})},{oauthToken:i,oauthVerifier:s}=n().query;return i&&s&&o.post("/customer/bind/twitter/back",{oauthToken:i,oauthVerifier:s}).then(()=>{r(),m().replace(n().path)}),r(),{bindX:c,bindCard:d,bindTM:f,queryStatus:r,status:t,loading:a}}export{b as u};
