import{d as R,r as v,a2 as S,l as P,o as w,c as k,e as f,C as U,f as l,w as s,g as t,$ as j,ac as z,m as O,i as V,j as D,E as H,B as M,k as q}from"./index-0207282d.js";import{E as G,a as J}from"./el-form-item-cffcfafd.js";import{E as Q,a as W}from"./el-table-column-def74e1d.js";import"./el-checkbox-816fe3b3.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-90f9afbe.js";import"./el-tag-0efdc75d.js";/* empty css                  */import{_ as X}from"./UploadAvatar.vue_vue_type_script_setup_true_lang-6923552b.js";/* empty css                 */import{E as Y,a as Z}from"./el-select-69ed96fa.js";import{u as x}from"./enum-569bea9e.js";import{u as m}from"./useRule-31f8c705.js";const ll={class:"mb-4"},el={class:"big12 main-color",style:{"line-height":"1.5"}},al={class:"flex-center-x py-2 w-full"},ol={class:"flex-1"},tl={class:"pt-4 flex-center col-span-2"},gl=R({__name:"AddEditModel",props:{row:{type:Object,default:()=>{}}},emits:["close"],setup(_,{emit:$}){const c=_,C=x(),h=v(),a=v({signList:[]});S(()=>{var n;(n=c.row)!=null&&n.id&&(a.value={...c.row,signList:c.row.signList??[]})});const d={empty:m.empty(),intnum:[m.empty(),m.intnum()],gteint:[m.empty(),m.gteint()],url:[m.empty(),m.url()]},b=v(!1),E=()=>{h.value.validate(async n=>{var o;if(n)try{b.value=!0,await D.post(`/chain/${(o=c.row)!=null&&o.id?"update":"save"}`,{...a.value,signList:a.value.signList.filter(r=>r.signAddress&&r.signKey)}),C.initBase(),$("close",!0)}finally{b.value=!1}})},B=()=>{a.value.signList.push({signAddress:"",signKey:""})},N=n=>{a.value.signList.splice(n,1)};return(n,o)=>{const r=Y,A=Z,i=G,u=H,L=P("Plus"),K=M,T=X,y=q,g=Q,F=W,I=J;return w(),k("div",null,[f("div",ll,U(n.$t("system.chain.t21")),1),l(I,{ref_key:"formRef",ref:h,model:t(a),"label-width":"110px","label-position":"left",class:"grid grid-cols-2 gap-x-5"},{default:s(()=>[l(i,{label:n.$t("system.chain.t2"),rules:d.empty,prop:"chainType"},{default:s(()=>[l(A,{modelValue:t(a).chainType,"onUpdate:modelValue":o[0]||(o[0]=e=>t(a).chainType=e),class:"w-full",disabled:_.row.modify},{default:s(()=>[(w(!0),k(j,null,z(t(C).chainTypeList,(e,p)=>(w(),O(r,{key:p,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1},8,["label","rules"]),l(i,{label:n.$t("system.chain.t3"),rules:d.empty,prop:"chainName"},{default:s(()=>[l(u,{modelValue:t(a).chainName,"onUpdate:modelValue":o[1]||(o[1]=e=>t(a).chainName=e)},null,8,["modelValue"])]),_:1},8,["label","rules"]),l(i,{label:n.$t("system.chain.t5"),rules:d.intnum,prop:"chainId"},{default:s(()=>[l(u,{modelValue:t(a).chainId,"onUpdate:modelValue":o[2]||(o[2]=e=>t(a).chainId=e)},null,8,["modelValue"])]),_:1},8,["label","rules"]),l(i,{label:n.$t("system.chain.t4"),rules:d.empty,prop:"status"},{default:s(()=>[l(A,{modelValue:t(a).status,"onUpdate:modelValue":o[3]||(o[3]=e=>t(a).status=e),class:"w-full"},{default:s(()=>[l(r,{label:n.$t("system.chain.t18"),value:1},null,8,["label"]),l(r,{label:n.$t("system.chain.t17"),value:0},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label","rules"]),l(i,{label:n.$t("system.chain.t6"),rules:d.empty,prop:"baseCoinCode"},{default:s(()=>[l(u,{modelValue:t(a).baseCoinCode,"onUpdate:modelValue":o[4]||(o[4]=e=>t(a).baseCoinCode=e)},null,8,["modelValue"])]),_:1},8,["label","rules"]),l(i,{label:n.$t("system.chain.t7"),rules:d.intnum,prop:"baseCoinAccuracy"},{default:s(()=>[l(u,{modelValue:t(a).baseCoinAccuracy,"onUpdate:modelValue":o[5]||(o[5]=e=>t(a).baseCoinAccuracy=e)},null,8,["modelValue"])]),_:1},8,["label","rules"]),l(i,{label:"链本币地址",rules:d.empty,prop:"baseCoinAddress"},{default:s(()=>[l(u,{modelValue:t(a).baseCoinAddress,"onUpdate:modelValue":o[6]||(o[6]=e=>t(a).baseCoinAddress=e)},null,8,["modelValue"])]),_:1},8,["rules"]),l(i,{label:n.$t("system.chain.t8"),prop:"imgUrl",class:"inlineBlock w50",rules:d.empty},{default:s(()=>[l(T,{modelValue:t(a).imgUrl,"onUpdate:modelValue":o[7]||(o[7]=e=>t(a).imgUrl=e),class:"w-10 h-10"},{default:s(()=>[l(K,{size:25,class:"!w-full !h-full border border-dashed border-[#ccc] rounded-lg"},{default:s(()=>[l(L)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label","rules"]),l(i,{label:n.$t("system.chain.t9"),rules:d.empty,prop:"protocol"},{default:s(()=>[l(u,{modelValue:t(a).protocol,"onUpdate:modelValue":o[8]||(o[8]=e=>t(a).protocol=e)},null,8,["modelValue"])]),_:1},8,["label","rules"]),l(i,{label:n.$t("system.chain.t10"),rules:d.url,prop:"scanUrl"},{default:s(()=>[l(u,{modelValue:t(a).scanUrl,"onUpdate:modelValue":o[9]||(o[9]=e=>t(a).scanUrl=e)},null,8,["modelValue"])]),_:1},8,["label","rules"]),l(i,{label:"RPC URL",rules:d.empty,prop:"rpcUrls",class:"col-span-2"},{default:s(()=>[l(u,{modelValue:t(a).rpcUrls,"onUpdate:modelValue":o[10]||(o[10]=e=>t(a).rpcUrls=e),type:"textarea",rows:"2",placeholder:n.$t("system.chain.t22")},null,8,["modelValue","placeholder"]),f("p",el,U(n.$t("system.chain.t22")),1)]),_:1},8,["rules"]),l(i,{"label-width":"0",class:"col-span-2"},{default:s(()=>[f("div",al,[f("div",ol,U(n.$t("system.chain.t12")),1),l(y,{type:"primary",onClick:B},{default:s(()=>[V("添加")]),_:1})]),l(F,{data:t(a).signList,class:"w-full",stripe:""},{default:s(()=>[l(g,{label:n.$t("system.chain.t11"),"min-width":"100",align:"center","show-overflow-tooltip":""},{default:s(e=>[l(u,{modelValue:e.row.signAddress,"onUpdate:modelValue":p=>e.row.signAddress=p},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),l(g,{label:n.$t("system.chain.t12"),"min-width":"100",align:"center","show-overflow-tooltip":""},{default:s(e=>[l(u,{modelValue:e.row.signKey,"onUpdate:modelValue":p=>e.row.signKey=p},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),l(g,{label:"操作",width:"100",align:"center","show-overflow-tooltip":""},{default:s(e=>[l(y,{type:"danger",size:"small",plain:"",onClick:p=>N(e.$index)},{default:s(()=>[V("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),l(i,{label:n.$t("system.chain.t13"),rules:d.gteint,prop:"confirmBlockNum"},{default:s(()=>[l(u,{modelValue:t(a).confirmBlockNum,"onUpdate:modelValue":o[11]||(o[11]=e=>t(a).confirmBlockNum=e)},null,8,["modelValue"])]),_:1},8,["label","rules"]),l(i,{label:n.$t("system.chain.t14"),rules:d.gteint,prop:"invalidBlockNum"},{default:s(()=>[l(u,{modelValue:t(a).invalidBlockNum,"onUpdate:modelValue":o[12]||(o[12]=e=>t(a).invalidBlockNum=e)},null,8,["modelValue"])]),_:1},8,["label","rules"]),l(i,{label:"Visit Api",prop:"visitApi"},{default:s(()=>[l(u,{modelValue:t(a).visitApi,"onUpdate:modelValue":o[13]||(o[13]=e=>t(a).visitApi=e)},null,8,["modelValue"])]),_:1}),l(i,{label:"visit Api Key",prop:"visitApiKey"},{default:s(()=>[l(u,{modelValue:t(a).visitApiKey,"onUpdate:modelValue":o[14]||(o[14]=e=>t(a).visitApiKey=e)},null,8,["modelValue"])]),_:1}),f("div",tl,[l(y,{type:"info",disabled:t(b),onClick:o[15]||(o[15]=e=>$("close"))},{default:s(()=>[V("关闭")]),_:1},8,["disabled"]),l(y,{type:"primary",loading:t(b),onClick:E},{default:s(()=>[V("保存")]),_:1},8,["loading"])])]),_:1},8,["model"])])}}});export{gl as _};
