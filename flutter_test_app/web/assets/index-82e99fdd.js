import{d as N,a as j,o as u,c as b,f as e,w as n,g as t,$ as P,ac as R,m as y,e as q,i as _,Y as H,ax as I,j as h,E as M,k as O}from"./index-0207282d.js";import{v as Q}from"./el-loading-080c5bc8.js";import{u as Y,_ as A,a as G}from"./useTable-c580cec4.js";import{E as J,a as K}from"./el-table-column-def74e1d.js";import"./el-checkbox-816fe3b3.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-90f9afbe.js";import{E as W}from"./el-switch-fc971dae.js";import"./el-tag-0efdc75d.js";/* empty css                  */import{_ as X}from"./DatePacker.vue_vue_type_script_setup_true_lang-26ef7ab0.js";/* empty css                 */import{E as Z,a as ee}from"./el-select-69ed96fa.js";import{_ as te}from"./QueryFormItem.vue_vue_type_style_index_0_lang-72d81a3d.js";import{_ as ae}from"./AddEditModal.vue_vue_type_script_setup_true_lang-6068762c.js";import{u as oe}from"./useConfirm-47e716c6.js";import{E as k}from"./message-4c47188d.js";import"./el-form-item-cffcfafd.js";import"./castArray-b8a06b61.js";import"./_Uint8Array-5054225c.js";import"./_initCloneObject-d522ba90.js";import"./isEqual-7382b5a8.js";import"./hasIn-41f90f84.js";import"./flatten-24f36df1.js";import"./index-83327429.js";import"./raf-fd37df43.js";import"./el-date-picker-792cf559.js";import"./useDate-185e3b3e.js";import"./strings-185a2c5e.js";import"./el-tree-ff8d1f17.js";import"./index-a7a35487.js";import"./useRule-31f8c705.js";const ne={class:"p-4"},le={class:"flex justify-end flex-1"},Re=N({__name:"index",setup(se){const{form:s,pending:f,tableData:v,search:V,refresh:c,reset:C,pagination:E}=Y({method:"get",url:"/sys/role/list"}),w=j({0:"禁用",1:"启用"}),g=o=>{I.add({component:ae,type:"dialog",width:"500px",title:o!=null&&o.id?"编辑":"新增",showClose:!1,props:{row:o??{}},afterClose(l){l&&c()}})},x=o=>{oe("确定删除该角色吗？",async(l,p)=>{try{await h.deleteForm("/sys/role",{id:o.id}),k.success("操作成功"),c(),l()}catch{p()}})},F=async o=>{try{o.statusLoadinng=!0,await h.putForm("/sys/role/setStatus",{id:o.id,status:o.status}),o.statusLoadinng=!1,k.success("操作成功")}catch{o.statusLoadinng=!1,o.status=o.status==1?0:1}};return(o,l)=>{const p=M,m=te,$=Z,T=ee,L=X,d=O,i=J,S=W,B=K,U=A,D=G,z=Q;return u(),b("div",ne,[e(D,{onSearchFun:t(V),onResetFun:t(C),pending:t(f)},{search:n(()=>[e(m,{label:"角色名称",prop:t(s).name},{default:n(()=>[e(p,{modelValue:t(s).name,"onUpdate:modelValue":l[0]||(l[0]=a=>t(s).name=a)},null,8,["modelValue"])]),_:1},8,["prop"]),e(m,{label:"权限字符",prop:t(s).key},{default:n(()=>[e(p,{modelValue:t(s).key,"onUpdate:modelValue":l[1]||(l[1]=a=>t(s).key=a)},null,8,["modelValue"])]),_:1},8,["prop"]),e(m,{label:"状态",prop:t(s).status},{default:n(()=>[e(T,{modelValue:t(s).status,"onUpdate:modelValue":l[2]||(l[2]=a=>t(s).status=a),clearable:""},{default:n(()=>[(u(!0),b(P,null,R(t(w),(a,r)=>(u(),y($,{key:r,label:a,value:r},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["prop"]),e(m,{label:"创建时间",prop:t(s).beginTimestamp,class:"!w-[235px]"},{default:n(()=>[e(L,{form:t(s),keys:["beginTimestamp","endTimestamp"]},null,8,["form"])]),_:1},8,["prop"])]),action:n(()=>[q("div",le,[e(d,{type:"primary",size:"small",onClick:l[3]||(l[3]=a=>g())},{default:n(()=>[_("新增")]),_:1})])]),result:n(()=>[H((u(),y(B,{data:t(v),stripe:"",class:"w-full"},{default:n(()=>[e(i,{prop:"id",label:"角色编号"}),e(i,{prop:"name",label:"角色名称",align:"center","min-width":"120"}),e(i,{prop:"key",label:"权限字符",align:"center","min-width":"120"}),e(i,{prop:"sort",label:"展示顺序",align:"center","min-width":"100"}),e(i,{prop:"status",label:"状态",align:"center","min-width":"100"},{default:n(a=>[e(S,{modelValue:a.row.status,"onUpdate:modelValue":r=>a.row.status=r,loading:a.row.statusLoadinng,"active-value":1,"inactive-value":0,onClick:r=>F(a.row)},null,8,["modelValue","onUpdate:modelValue","loading","onClick"])]),_:1}),e(i,{prop:"createTime",label:"创建时间",align:"center","min-width":"170"}),e(i,{label:"操作",fixed:"right",align:"center",width:"180"},{default:n(a=>[e(d,{type:"primary",size:"small",plain:"",onClick:r=>g(a.row)},{default:n(()=>[_(" 修改 ")]),_:2},1032,["onClick"]),e(d,{type:"danger",size:"small",plain:"",onClick:r=>x(a.row)},{default:n(()=>[_("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[z,t(f)]]),e(U,{pagination:t(E),class:"mt-4",onChange:t(c)},null,8,["pagination","onChange"])]),_:1},8,["onSearchFun","onResetFun","pending"])])}}});export{Re as default};
