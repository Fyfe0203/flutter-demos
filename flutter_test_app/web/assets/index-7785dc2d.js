import{d as L,o as c,c as w,f as t,w as o,e as V,i as l,Y as j,m as h,g as s,C as y,ax as d,j as g,k as R}from"./index-cba2b4c0.js";import{v as H}from"./el-loading-73839a64.js";import{u as M,_ as P,a as Q}from"./useTable-141dc978.js";import{E as Y,a as q}from"./el-table-column-29b9dcad.js";import"./el-checkbox-ee806963.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-b7327fbb.js";import{_ as A}from"./Timekeeping.vue_vue_type_script_setup_true_lang-17672903.js";import"./el-tag-3e82924f.js";/* empty css                  */import{_ as G}from"./AddEditModal.vue_vue_type_script_setup_true_lang-a123f1ed.js";import{_ as I}from"./CoinList.vue_vue_type_script_setup_true_lang-e4ffd454.js";import{_ as J}from"./LinkTask.vue_vue_type_script_setup_true_lang-19be4552.js";import{u as v}from"./useConfirm-a0ba45e7.js";import{E as C}from"./message-71d8a824.js";import"./el-form-item-a7ed5b06.js";import"./castArray-8dcd6c67.js";import"./_Uint8Array-4a491129.js";import"./_initCloneObject-d933937d.js";/* empty css                 */import"./el-select-7e09c5da.js";import"./strings-091bd2d7.js";import"./isEqual-014128fa.js";import"./index-877b19ec.js";import"./hasIn-40dec949.js";import"./flatten-b246eae0.js";import"./raf-5985b260.js";import"./useDate-0bf7f9c9.js";import"./InputDecimal.vue_vue_type_style_index_0_lang-697337b8.js";import"./el-date-picker-c21c9fd9.js";import"./enum-223dcce8.js";import"./useRule-31f8c705.js";const K={class:"p-4"},O={class:"flex justify-end flex-1"},U={key:1},Ft=L({__name:"index",setup(W){const{pending:_,tableData:b,pagination:k,search:x,refresh:p,reset:$}=M({method:"post",url:"/activity/page"}),f=i=>{d.add({component:G,type:"dialog",width:"600px",title:i!=null&&i.id?"编辑运营活动":"新增运营活动",showClose:!1,props:{row:i??{}},afterClose(n){n&&p()}})},T=i=>{d.add({component:I,type:"dialog",width:"500px",title:"支持标的",props:{row:i??{}}})},E=i=>{d.add({component:J,type:"dialog",width:"800px",title:"关联任务",props:{row:i??{}},afterClose(n){n&&p()}})},N=i=>{v("确定"+(i.status===1?"禁用":"启用")+"该数据吗？",async n=>{try{await g.post("/activity/edit/status",{activityNo:i.activityNo,status:i.status===1?0:1}),C.success("操作成功"),p()}finally{n()}})},z=i=>{v("确定删除该数据吗？",async n=>{try{await g.post("/activity/delete",{activityNo:i.activityNo}),C.success("操作成功"),p()}finally{n()}})};return(i,n)=>{const r=R,a=Y,u=A,F=q,B=P,S=Q,D=H;return c(),w("div",K,[t(S,{onSearchFun:s(x),onResetFun:s($),pending:s(_)},{action:o(()=>[V("div",O,[t(r,{type:"primary",size:"small",onClick:f},{default:o(()=>[l("新增活动")]),_:1})])]),result:o(()=>[j((c(),h(F,{data:s(b),stripe:"",class:"w-full"},{default:o(()=>[t(a,{label:"序号",width:"60",align:"center","show-overflow-tooltip":""},{default:o(e=>[l(y(e.$index+1),1)]),_:1}),t(a,{prop:"activityName",label:"活动名称",align:"center","min-width":"120","show-overflow-tooltip":""}),t(a,{label:"开始时间",align:"center","min-width":"120","show-overflow-tooltip":""},{default:o(e=>[t(u,{"begin-time":e.row.activityStartTime},null,8,["begin-time"])]),_:1}),t(a,{label:"结束时间",align:"center","min-width":"120","show-overflow-tooltip":""},{default:o(e=>[e.row.activityEndTime?(c(),h(u,{key:0,"begin-time":e.row.activityEndTime},null,8,["begin-time"])):(c(),w("span",U,"无截止日"))]),_:1}),t(a,{prop:"chainType",label:"支持网络",align:"center","min-width":"90","show-overflow-tooltip":""}),t(a,{prop:"rate",label:"汇率",align:"center","min-width":"80","show-overflow-tooltip":""}),t(a,{label:"支持标的",align:"center","min-width":"80","show-overflow-tooltip":""},{default:o(e=>[t(r,{type:"primary",size:"small",plain:"",onClick:m=>T(e.row)},{default:o(()=>[l("查看")]),_:2},1032,["onClick"])]),_:1}),t(a,{label:"关联任务",align:"center","min-width":"80","show-overflow-tooltip":""},{default:o(e=>[t(r,{type:"primary",size:"small",plain:"",onClick:m=>E(e.row)},{default:o(()=>[l(" 查看 ")]),_:2},1032,["onClick"])]),_:1}),t(a,{label:"操作",fixed:"right",align:"center",width:"200"},{default:o(e=>[t(r,{type:"primary",size:"small",plain:"",onClick:m=>f(e.row)},{default:o(()=>[l(" 编辑 ")]),_:2},1032,["onClick"]),t(r,{type:e.row.status==1?"danger":"success",size:"small",plain:"",onClick:m=>N(e.row)},{default:o(()=>[l(y(e.row.status==1?"禁用":"启用"),1)]),_:2},1032,["type","onClick"]),t(r,{type:"danger",size:"small",plain:"",onClick:m=>z(e.row)},{default:o(()=>[l("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[D,s(_)]]),t(B,{pagination:s(k),class:"mt-4",onChange:s(p)},null,8,["pagination","onChange"])]),_:1},8,["onSearchFun","onResetFun","pending"])])}}});export{Ft as default};
