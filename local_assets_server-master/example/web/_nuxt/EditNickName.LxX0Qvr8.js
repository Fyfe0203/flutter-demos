import{E as h}from"./el-input.LbCLpOjr.js";import{a as y,E as N}from"./el-form.bSdGaXOr.js";import $ from"./Button.bEOq16Ty.js";import{t as r,u as p,a as x,b as E}from"./entry.nbMAVAIE.js";import{d as F,c as w,a as d,r as B,E as C,F as I,X as q,Y as i,u as a,W as m,a2 as H,a6 as R,H as S}from"./swiper-vue.o0IHd9hR.js";import"./typescript.WBLZcIum.js";import"./castArray.IfhTYq5g.js";import"./_baseClone.DMOROgmz.js";import"./_initCloneObject.aIezyqVt.js";import"./el-button.fhXFyBz0.js";const U={class:"pt-8"},K=F({__name:"EditNickName",emits:["close"],setup(z,{emit:f}){const _=f,k={nickname:[{required:!0,message:r("bot.t08"),min:1,max:20,trigger:"change"},{message:r("bot.t09"),pattern:/^[a-z0-9\s-]+$/i,trigger:"change"}]},c=w(()=>p().app.user),l=d(),o=B({nickname:""});C(()=>{var e;o.nickname=((e=c.value)==null?void 0:e.nickname)??""});const n=d(!1),g=e=>{e==null||e.validate(async t=>{var s;if(t)try{n.value=!0,await x.postForm("/customer/nick",{uid:(s=c.value)==null?void 0:s.uid,nickname:o.nickname}),E.success(r("bot.t47")),p().app.getUserInfo(),_("close",!0)}finally{n.value=!1}})};return(e,t)=>{const s=h,b=y,v=$,V=N;return I(),q(V,{ref_key:"formRef",ref:l,"label-position":"top",model:a(o),"hide-required-asterisk":"",class:"cus-form p-[30px]"},{default:i(()=>[m(b,{label:e.$t("bot.t45"),prop:"nickname",rules:k.nickname},{default:i(()=>[m(s,{modelValue:a(o).nickname,"onUpdate:modelValue":t[0]||(t[0]=u=>a(o).nickname=u),placeholder:e.$t("bot.t46")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),S("div",U,[m(v,{loading:a(n),onClick:t[1]||(t[1]=u=>g(a(l)))},{default:i(()=>[R(H(e.$t("login.t25")),1)]),_:1},8,["loading"])])]),_:1},8,["model"])}}});export{K as default};
