import{d as D,r as E,N as F,t as N,o as h,m as b,w as o,e as y,f as i,i as l,C as r,Y as z,g as p,ax as V,j,k as H}from"./index-cba2b4c0.js";import{v as I}from"./el-loading-73839a64.js";import{u as M,_ as P,a as Q}from"./useTable-141dc978.js";import{E as S,a as Y}from"./el-table-column-29b9dcad.js";import"./el-checkbox-ee806963.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-b7327fbb.js";import"./el-tag-3e82924f.js";/* empty css                  */import{_ as q}from"./AddEditModel.vue_vue_type_script_setup_true_lang-00e74adc.js";import"./el-form-item-a7ed5b06.js";import"./castArray-8dcd6c67.js";import"./_Uint8Array-4a491129.js";import"./_initCloneObject-d933937d.js";/* empty css                 */import"./el-select-7e09c5da.js";import"./strings-091bd2d7.js";import"./isEqual-014128fa.js";import"./index-877b19ec.js";import"./hasIn-40dec949.js";import"./flatten-b246eae0.js";import"./raf-5985b260.js";import"./InputDecimal.vue_vue_type_style_index_0_lang-697337b8.js";import"./enum-223dcce8.js";import"./useRule-31f8c705.js";const A={class:"flex justify-end flex-1"},G={class:"table-btn-cell"},ht=D({__name:"index",setup(J){const{pending:f,tableData:v,pagination:C,refresh:u}=M({method:"postForm",url:"/fee/list"}),_={1:"账户模块",2:"策略模块"},T={1:"固定数量",2:"费率"},w={1:"额外付",2:"到账少",3:"Both"},d=(e,s=!1)=>{V.add({component:q,type:"dialog",width:"500px",title:e!=null&&e.id?"编辑":"新增",showClose:!1,props:{row:e??{},modules:_,payTypes:w,feeType:T,feeList:c.value,readonly:s},afterClose(n){n&&(u(),g())}})},c=E([]),g=async()=>{const e=await j.postForm("/fee/trade/type");c.value=e},$=F(()=>(e,s)=>{var n;return(n=c.value.find(a=>a.module===e))==null?void 0:n.tradeList.find(a=>a.code===s)});return N(g),(e,s)=>{const n=H,a=S,k=Y,x=P,B=Q,L=I;return h(),b(B,{pending:p(f),class:"p-4"},{action:o(()=>[y("div",A,[i(n,{type:"primary",size:"small",onClick:s[0]||(s[0]=t=>d())},{default:o(()=>[l(r(e.$t("public.t5")),1)]),_:1})])]),result:o(()=>[z((h(),b(k,{data:p(v),class:"w-full",stripe:""},{default:o(()=>[i(a,{label:"序号","min-width":"100",align:"center","show-overflow-tooltip":""},{default:o(t=>[l(r(t.row.num||"-"),1)]),_:1}),i(a,{label:"模块","min-width":"100",align:"center","show-overflow-tooltip":""},{default:o(t=>[l(r(_[t.row.module]||"-"),1)]),_:1}),i(a,{label:"交易名称","min-width":"100",align:"center","show-overflow-tooltip":""},{default:o(t=>{var m;return[l(r(((m=p($)(t.row.module,t.row.tradeType))==null?void 0:m.desc)||"-"),1)]}),_:1}),i(a,{label:"支付方式","min-width":"100",align:"center","show-overflow-tooltip":""},{default:o(t=>[l(r(w[t.row.payType]||"-"),1)]),_:1}),i(a,{label:"收费规则","min-width":"70",align:"center","show-overflow-tooltip":""},{default:o(t=>[i(n,{type:"primary",size:"small",plain:"",onClick:m=>d(t.row,!0)},{default:o(()=>[l(" 查看 ")]),_:2},1032,["onClick"])]),_:1}),i(a,{label:e.$t("public.t7"),"min-width":"60",align:"center",fixed:"right"},{default:o(t=>[y("div",G,[i(n,{type:"primary",size:"small",plain:"",onClick:m=>d(t.row)},{default:o(()=>[l(r(e.$t("public.t11")),1)]),_:2},1032,["onClick"])])]),_:1},8,["label"])]),_:1},8,["data"])),[[L,p(f)]]),i(x,{pagination:p(C),class:"mt-4",onChange:p(u)},null,8,["pagination","onChange"])]),_:1},8,["pending"])}}});export{ht as default};
