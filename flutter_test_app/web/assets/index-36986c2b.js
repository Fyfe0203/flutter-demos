import{d as L,a as j,N as P,o as d,c as b,f as e,w as o,g as a,$ as U,ac as q,m as w,e as v,i as m,Y as H,C as y,ax as I,b as C,j as M,E as O,k as Q}from"./index-cba2b4c0.js";import{v as Y}from"./el-loading-73839a64.js";import{u as A,_ as G,a as J}from"./useTable-141dc978.js";import{E as K,a as W}from"./el-table-column-29b9dcad.js";import"./el-checkbox-ee806963.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-b7327fbb.js";import{_ as X}from"./SvgIcon-759b49ee.js";import"./el-tag-3e82924f.js";/* empty css                  *//* empty css                 */import{E as Z,a as ee}from"./el-select-7e09c5da.js";import{_ as te}from"./QueryFormItem.vue_vue_type_style_index_0_lang-5f9ef0ee.js";import{u as oe,_ as ae}from"./AddEditModal.vue_vue_type_script_setup_true_lang-bf7dc8b6.js";import{u as ne}from"./useConfirm-a0ba45e7.js";import{E as le}from"./message-71d8a824.js";import"./el-form-item-a7ed5b06.js";import"./castArray-8dcd6c67.js";import"./_Uint8Array-4a491129.js";import"./_initCloneObject-d933937d.js";import"./isEqual-014128fa.js";import"./hasIn-40dec949.js";import"./flatten-b246eae0.js";import"./index-877b19ec.js";import"./raf-5985b260.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./strings-091bd2d7.js";import"./el-tree-6278926d.js";import"./index-62ee38fb.js";import"./useRule-31f8c705.js";import"./dropdown-9f4d3e5f.js";const re={class:"p-4"},se={class:"flex justify-end flex-1"},qe=L({__name:"index",setup(ie){const{form:s,pending:g,tableData:k,search:E,refresh:u,reset:x,pagination:$}=A({method:"get",url:"/sys/menu/list"}),h=j({0:"禁用",1:"启用"}),V=P(()=>oe({data:k.value,id:"id",concatPath:!0})),_=(r,n)=>{I.add({component:ae,type:"dialog",width:"650px",title:r!=null&&r.id&&n!="add"?"编辑":"新增",showClose:!1,draggable:!0,props:{row:r??{},operationType:n||"add"},afterClose(i){i&&u(),i&&(u(),C().getRouter(!0))}})},F=r=>{ne("确定删除该菜单吗？",async(n,i)=>{try{await M.deleteForm(`/sys/menu/${r.id}`),C().getRouter(!0),le.success("操作成功"),u(),n()}catch{i()}})};return(r,n)=>{const i=O,f=te,T=Z,B=ee,c=Q,l=K,D=X,N=W,S=G,z=J,R=Y;return d(),b("div",re,[e(z,{onSearchFun:a(E),onResetFun:a(x),pending:a(g)},{search:o(()=>[e(f,{label:"菜单名称",prop:a(s).name},{default:o(()=>[e(i,{modelValue:a(s).name,"onUpdate:modelValue":n[0]||(n[0]=t=>a(s).name=t)},null,8,["modelValue"])]),_:1},8,["prop"]),e(f,{label:"状态",prop:a(s).status},{default:o(()=>[e(B,{modelValue:a(s).status,"onUpdate:modelValue":n[1]||(n[1]=t=>a(s).status=t),clearable:""},{default:o(()=>[(d(!0),b(U,null,q(a(h),(t,p)=>(d(),w(T,{key:p,label:t,value:p},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["prop"])]),action:o(()=>[v("div",se,[e(c,{type:"primary",size:"small",onClick:n[2]||(n[2]=t=>_())},{default:o(()=>[m("新增")]),_:1})])]),result:o(()=>[H((d(),w(N,{data:a(V),"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:o(()=>[e(l,{prop:"name",label:"菜单名称","show-overflow-tooltip":!0,width:"160"}),e(l,{prop:"icon",label:"菜单图标",align:"center",width:"80"},{default:o(t=>[e(D,{name:t.row.icon},null,8,["name"])]),_:1}),e(l,{prop:"orderNum",label:"排序",width:"60"}),e(l,{prop:"perms",label:"权限标识","show-overflow-tooltip":!0}),e(l,{prop:"path",label:"路由地址","show-overflow-tooltip":!0}),e(l,{prop:"component",label:"组件路径","show-overflow-tooltip":!0}),e(l,{prop:"status",label:"状态",width:"80"},{default:o(t=>[m(y(a(h)[t.row.status]),1)]),_:1}),e(l,{label:"创建时间",align:"center",prop:"createTime","min-width":"180"},{default:o(t=>[v("span",null,y(t.row.createTime),1)]),_:1}),e(l,{label:"操作",align:"center",width:"200",fixed:"right"},{default:o(t=>[e(c,{size:"small",type:"primary",plain:"",onClick:p=>_(t.row,"edit")},{default:o(()=>[m(" 修改 ")]),_:2},1032,["onClick"]),e(c,{size:"small",type:"primary",onClick:p=>_(t.row,"add")},{default:o(()=>[m(" 新增 ")]),_:2},1032,["onClick"]),e(c,{size:"small",type:"danger",plain:"",onClick:p=>F(t.row)},{default:o(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[R,a(g)]]),e(S,{pagination:a($),class:"mt-4",onChange:a(u)},null,8,["pagination","onChange"])]),_:1},8,["onSearchFun","onResetFun","pending"])])}}});export{qe as default};
