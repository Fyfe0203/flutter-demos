import{d as T,o as _,m as f,w as e,e as d,f as t,i as r,Y as $,g as a,C as z,ax as B,j as D,k as N}from"./index-0207282d.js";import{v as S}from"./el-loading-080c5bc8.js";import{u as V,_ as j,a as L}from"./useTable-c580cec4.js";import{E as R,a as H}from"./el-table-column-def74e1d.js";import"./el-checkbox-816fe3b3.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-90f9afbe.js";import{_ as I}from"./Timekeeping.vue_vue_type_script_setup_true_lang-7ee7f36f.js";import"./el-tag-0efdc75d.js";import{E as K}from"./el-image-viewer-2e0deb40.js";/* empty css                  */import{_ as M}from"./AddEditModal.vue_vue_type_script_setup_true_lang-136e098e.js";import{u as P}from"./useConfirm-47e716c6.js";import{E as Q}from"./message-4c47188d.js";import"./el-form-item-cffcfafd.js";import"./castArray-b8a06b61.js";import"./_Uint8Array-5054225c.js";import"./_initCloneObject-d522ba90.js";/* empty css                 */import"./el-select-69ed96fa.js";import"./strings-185a2c5e.js";import"./isEqual-7382b5a8.js";import"./index-83327429.js";import"./hasIn-41f90f84.js";import"./flatten-24f36df1.js";import"./raf-fd37df43.js";import"./useDate-185e3b3e.js";import"./UploadAvatar.vue_vue_type_script_setup_true_lang-6923552b.js";import"./useRule-31f8c705.js";const U={class:"flex justify-end flex-1"},Y=d("div",{class:"text-xs text-gray-400"},"预览失败",-1),ye=T({__name:"index",setup(q){const{pending:m,tableData:u,pagination:g,search:h,refresh:l,reset:w}=V({method:"post",url:"/profile/list"}),c=i=>{B.add({component:M,width:"500px",title:i!=null&&i.id?"编辑":"新增",showClose:!1,props:{row:i??{}},afterClose(s){s&&l()}})},x=i=>{P("确定删除该数据吗？",async s=>{try{await D.postForm("/profile/delete/"+i.id),Q.success("操作成功"),l()}finally{s()}})};return(i,s)=>{const p=N,b=K,n=R,C=I,y=H,v=j,k=L,E=S;return _(),f(k,{onSearchFun:a(h),onResetFun:a(w),pending:a(m),class:"p-4"},{action:e(()=>[d("div",U,[t(p,{type:"primary",size:"small",onClick:c},{default:e(()=>[r("新增")]),_:1})])]),result:e(()=>[$((_(),f(y,{data:a(u),stripe:"",class:"w-full"},{default:e(()=>[t(n,{label:"图片",align:"center","min-width":"100"},{default:e(o=>[t(b,{src:o.row.profileUrl,lazy:"",class:"w-[100px] h-10 flex-center",fit:"cover"},{error:e(()=>[Y]),_:2},1032,["src"])]),_:1}),t(n,{label:"图片大小",align:"center","min-width":"120","show-overflow-tooltip":""},{default:e(o=>[r(z(o.row.profileSize??0)+"KB",1)]),_:1}),t(n,{prop:"createTimestamp",label:"上传时间",align:"center","min-width":"120","show-overflow-tooltip":""},{default:e(o=>[t(C,{"begin-time":o.row.createTimestamp},null,8,["begin-time"])]),_:1}),t(n,{prop:"userName",label:"上传用户",align:"center","min-width":"120","show-overflow-tooltip":""}),t(n,{label:"操作",fixed:"right",align:"center",width:"140"},{default:e(o=>[t(p,{type:"primary",size:"small",plain:"",onClick:F=>c(o.row)},{default:e(()=>[r("编辑")]),_:2},1032,["onClick"]),t(p,{type:"danger",size:"small",plain:"",onClick:F=>x(o.row)},{default:e(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[E,a(m)]]),t(v,{pagination:a(g),class:"mt-4",onChange:a(l)},null,8,["pagination","onChange"])]),_:1},8,["onSearchFun","onResetFun","pending"])}}});export{ye as default};
